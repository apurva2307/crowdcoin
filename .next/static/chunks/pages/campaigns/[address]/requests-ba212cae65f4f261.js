(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{74899:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/[address]/requests",function(){return r(29923)}])},29923:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return B},default:function(){return D}});var s=r(85893),n=r(41664),a=r.n(n),l=r(87462),c=r(13871),i=r(86010),o=r(67294),u=r(98459),d=r(28935),p=r(12519),h=r(92248);function f(e){var t=e.children,r=e.className,s=(0,i.Z)(r),n=(0,d.Z)(f,e),a=(0,p.Z)(f,e);return o.createElement(a,(0,l.Z)({},n,{className:s}),t)}f.handledProps=["as","children","className"],f.defaultProps={as:"tbody"},f.propTypes={};var v=f,m=r(69591),g=r(45150);function x(e){var t=e.active,r=e.children,s=e.className,n=e.collapsing,a=e.content,c=e.disabled,f=e.error,v=e.icon,m=e.negative,Z=e.positive,w=e.selectable,b=e.singleLine,j=e.textAlign,G=e.verticalAlign,N=e.warning,y=e.width,k=(0,i.Z)((0,u.lG)(t,"active"),(0,u.lG)(n,"collapsing"),(0,u.lG)(c,"disabled"),(0,u.lG)(f,"error"),(0,u.lG)(m,"negative"),(0,u.lG)(Z,"positive"),(0,u.lG)(w,"selectable"),(0,u.lG)(b,"single line"),(0,u.lG)(N,"warning"),(0,u.X4)(j),(0,u.Ok)(G),(0,u.H0)(y,"wide"),s),P=(0,d.Z)(x,e),E=(0,p.Z)(x,e);return h.kK(r)?o.createElement(E,(0,l.Z)({},P,{className:k}),g.Z.create(v),a):o.createElement(E,(0,l.Z)({},P,{className:k}),r)}x.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],x.defaultProps={as:"td"},x.propTypes={},x.create=(0,m.u5)(x,(function(e){return{content:e}}));var Z=x;function w(e){var t=e.children,r=e.className,s=e.content,n=e.fullWidth,a=(0,i.Z)((0,u.lG)(n,"full-width"),r),c=(0,d.Z)(w,e),f=(0,p.Z)(w,e);return o.createElement(f,(0,l.Z)({},c,{className:a}),h.kK(t)?s:t)}w.handledProps=["as","children","className","content","fullWidth"],w.defaultProps={as:"thead"},w.propTypes={};var b=w;function j(e){var t=e.as,r=(0,d.Z)(j,e);return o.createElement(b,(0,l.Z)({},r,{as:t}))}j.handledProps=["as"],j.propTypes={},j.defaultProps={as:"tfoot"};var G=j;function N(e){var t=e.as,r=e.className,s=e.sorted,n=(0,i.Z)((0,u.cD)(s,"sorted"),r),a=(0,d.Z)(N,e);return o.createElement(Z,(0,l.Z)({},a,{as:t,className:n}))}N.handledProps=["as","className","sorted"],N.propTypes={},N.defaultProps={as:"th"};var y=N;function k(e){var t=e.active,r=e.cellAs,s=e.cells,n=e.children,a=e.className,f=e.disabled,v=e.error,m=e.negative,g=e.positive,x=e.textAlign,w=e.verticalAlign,b=e.warning,j=(0,i.Z)((0,u.lG)(t,"active"),(0,u.lG)(f,"disabled"),(0,u.lG)(v,"error"),(0,u.lG)(m,"negative"),(0,u.lG)(g,"positive"),(0,u.lG)(b,"warning"),(0,u.X4)(x),(0,u.Ok)(w),a),G=(0,d.Z)(k,e),N=(0,p.Z)(k,e);return h.kK(n)?o.createElement(N,(0,l.Z)({},G,{className:j}),(0,c.Z)(s,(function(e){return Z.create(e,{defaultProps:{as:r}})}))):o.createElement(N,(0,l.Z)({},G,{className:j}),n)}k.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],k.defaultProps={as:"tr",cellAs:"td"},k.propTypes={},k.create=(0,m.u5)(k,(function(e){return{cells:e}}));var P=k;function E(e){var t=e.attached,r=e.basic,s=e.celled,n=e.children,a=e.className,f=e.collapsing,m=e.color,g=e.columns,x=e.compact,Z=e.definition,w=e.fixed,j=e.footerRow,N=e.headerRow,y=e.headerRows,k=e.inverted,A=e.padded,R=e.renderBodyRow,q=e.selectable,C=e.singleLine,_=e.size,S=e.sortable,T=e.stackable,O=e.striped,z=e.structured,F=e.tableData,H=e.textAlign,B=e.unstackable,D=e.verticalAlign,X=(0,i.Z)("ui",m,_,(0,u.lG)(s,"celled"),(0,u.lG)(f,"collapsing"),(0,u.lG)(Z,"definition"),(0,u.lG)(w,"fixed"),(0,u.lG)(k,"inverted"),(0,u.lG)(q,"selectable"),(0,u.lG)(C,"single line"),(0,u.lG)(S,"sortable"),(0,u.lG)(T,"stackable"),(0,u.lG)(O,"striped"),(0,u.lG)(z,"structured"),(0,u.lG)(B,"unstackable"),(0,u.sU)(t,"attached"),(0,u.sU)(r,"basic"),(0,u.sU)(x,"compact"),(0,u.sU)(A,"padded"),(0,u.X4)(H),(0,u.Ok)(D),(0,u.H0)(g,"column"),"table",a),K=(0,d.Z)(E,e),L=(0,p.Z)(E,e);if(!h.kK(n))return o.createElement(L,(0,l.Z)({},K,{className:X}),n);var M={defaultProps:{cellAs:"th"}},U=(N||y)&&o.createElement(b,null,P.create(N,M),(0,c.Z)(y,(function(e){return P.create(e,M)})));return o.createElement(L,(0,l.Z)({},K,{className:X}),U,o.createElement(v,null,R&&(0,c.Z)(F,(function(e,t){return P.create(R(e,t))}))),j&&o.createElement(G,null,P.create(j)))}E.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],E.defaultProps={as:"table"},E.propTypes={},E.Body=v,E.Cell=Z,E.Footer=G,E.Header=b,E.HeaderCell=y,E.Row=P;var A=E,R=r(80967),q=r(11163),C=r(2958),_=r(34051),S=r.n(_),T=r(86863),O=r(67156);function z(e,t,r,s,n,a,l){try{var c=e[a](l),i=c.value}catch(o){return void r(o)}c.done?t(i):Promise.resolve(i).then(s,n)}function F(e){return function(){var t=this,r=arguments;return new Promise((function(s,n){var a=e.apply(t,r);function l(e){z(a,s,n,l,c,"next",e)}function c(e){z(a,s,n,l,c,"throw",e)}l(void 0)}))}}var H=function(e){var t=e.request,r=e.address,n=e.id,a=e.approversCount,l=e.setErrorMessage,c=e.setSuccessMessage,i=A.Row,u=A.Cell,d=(0,q.useRouter)(),p=(0,o.useState)(!1),h=p[0],f=p[1],v=(0,o.useState)(!1),m=v[0],g=v[1],x=(0,o.useState)(""),Z=x[0],w=x[1],b=function(){var e=F(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,t=(0,T.Z)(r),e.next=5,t.methods.approveRequest(n).send({from:Z});case 5:d.replace(d.asPath),c("You have successfully approved the request."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),l(e.t0.message);case 12:f(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=F(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,t=(0,T.Z)(r),e.next=5,t.methods.finalizeRequest(n).send({from:Z});case 5:d.replace(d.asPath),c("You have successfully finalized the request."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),l(e.t0.message);case 12:g(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e=function(){var e=F(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.Z.eth.getAccounts();case 2:t=e.sent,w(t[0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,s.jsxs)(i,{disabled:t.complete,positive:t.votingCount>a/2&&!t.complete,children:[(0,s.jsx)(u,{children:n}),(0,s.jsx)(u,{children:t.description}),(0,s.jsx)(u,{children:O.Z.utils.fromWei(t.value,"ether")}),(0,s.jsx)(u,{children:t.recipient}),(0,s.jsxs)(u,{children:[t.votingCount,"/",a]}),(0,s.jsx)(u,{children:t.complete?"":(0,s.jsx)(R.Z,{loading:h,color:"green",basic:!0,onClick:b,children:"Approve"})}),(0,s.jsx)(u,{children:t.complete?"":(0,s.jsx)(R.Z,{loading:m,color:"teal",basic:!0,onClick:j,children:"Finalize"})})]})},B=!0,D=function(e){var t=e.address,r=e.requests,n=e.approversCount;r=JSON.parse(r);var l=A.Header,c=A.Row,i=A.HeaderCell,u=A.Body,d=(0,o.useState)(!1),p=d[0],h=d[1],f=(0,o.useState)(""),v=f[0],m=f[1],g=(0,o.useState)(""),x=g[0],Z=g[1],w=(0,q.useRouter)();return(0,o.useEffect)((function(){h(w.query.msgFlash);var e=setTimeout((function(){w.replace("/campaigns/".concat(t,"/requests"),void 0,{shallow:!0})}),5e3);return function(){clearTimeout(e)}}),[w.query.msgFlash]),v&&setTimeout((function(){m("")}),5e3),x&&setTimeout((function(){Z("")}),5e3),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{children:" Requests"}),p&&(0,s.jsx)(C.Z,{color:"green",header:"Success!",msg:"Your request created successfully."}),v&&(0,s.jsx)(C.Z,{color:"red",header:"Oops..",msg:v}),x&&(0,s.jsx)(C.Z,{color:"green",header:"Success!",msg:x}),(0,s.jsx)(a(),{href:{pathname:"/campaigns/[slug]/requests/new",query:{slug:t}},children:(0,s.jsx)("a",{children:(0,s.jsx)(R.Z,{floated:"right",primary:!0,style:{marginBottom:15},children:"Create Request"})})}),(0,s.jsxs)(A,{children:[(0,s.jsx)(l,{children:(0,s.jsxs)(c,{children:[(0,s.jsx)(i,{children:"ID"}),(0,s.jsx)(i,{children:"Description"}),(0,s.jsx)(i,{children:"Amount (ether)"}),(0,s.jsx)(i,{children:"Recipient"}),(0,s.jsx)(i,{children:"Arrpoval Count"}),(0,s.jsx)(i,{children:"Approve"}),(0,s.jsx)(i,{children:"Finalize"})]})}),(0,s.jsx)(u,{children:r.map((function(e,r){return(0,s.jsx)(H,{request:e,address:t,id:r,approversCount:n,setErrorMessage:m,setSuccessMessage:Z},r.toString())}))})]})]})}}},function(e){e.O(0,[482,714,625,389,521,774,888,179],(function(){return t=74899,e(e.s=t);var t}));var t=e.O();_N_E=t}]);